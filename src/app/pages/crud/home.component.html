<div class="content" role="main">
    <!-- Highlight Card -->
    <div class="card highlight-card card-small">
        <svg id="rocket" xmlns="http://www.w3.org/2000/svg" width="101.678" height="101.678"
            viewBox="0 0 101.678 101.678">
            <title>Rocket Ship</title>
            <g id="Group_83" data-name="Group 83" transform="translate(-141 -696)">
                <circle id="Ellipse_8" data-name="Ellipse 8" cx="50.839" cy="50.839" r="50.839"
                    transform="translate(141 696)" fill="#dd0031" />
                <g id="Group_47" data-name="Group 47" transform="translate(165.185 720.185)">
                    <path id="Path_33" data-name="Path 33"
                        d="M3.4,42.615a3.084,3.084,0,0,0,3.553,3.553,21.419,21.419,0,0,0,12.215-6.107L9.511,30.4A21.419,21.419,0,0,0,3.4,42.615Z"
                        transform="translate(0.371 3.363)" fill="#fff" />
                    <path id="Path_34" data-name="Path 34"
                        d="M53.3,3.221A3.09,3.09,0,0,0,50.081,0,48.227,48.227,0,0,0,18.322,13.437c-6-1.666-14.991-1.221-18.322,7.218A33.892,33.892,0,0,1,9.439,25.1l-.333.666a3.013,3.013,0,0,0,.555,3.553L23.985,43.641a2.9,2.9,0,0,0,3.553.555l.666-.333A33.892,33.892,0,0,1,32.647,53.3c8.55-3.664,8.884-12.326,7.218-18.322A48.227,48.227,0,0,0,53.3,3.221ZM34.424,9.772a6.439,6.439,0,1,1,9.106,9.106,6.368,6.368,0,0,1-9.106,0A6.467,6.467,0,0,1,34.424,9.772Z"
                        transform="translate(0 0.005)" fill="#fff" />
                </g>
            </g>
        </svg>
        <span class="fs-6">MAINTENANCE PAYROLL</span>
        <svg id="rocket-smoke" xmlns="http://www.w3.org/2000/svg" width="516.119" height="1083.632"
            viewBox="0 0 516.119 1083.632">
            <path id="Path_40" data-name="Path 40"
                d="M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z"
                transform="translate(-147.025 -140.939)" fill="#f5f5f5" />
        </svg>
    </div>
    <!-------------- Database --------------->
    <h2>Team Data Base</h2>
    <p>Find, add, edit and delete Maintenance Team members information:</p>
    <button class="btn text-light mt-2" style="background-color: #1976d2;" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasExample" aria-controls="offcanvasExample" [routerLink]="['/']">
        Add Worker
    </button>
    <div class="col-10 offset-1 mt-4">
        <table *ngIf="listMainteance.length > 0" class="table table-striped table-responsive">
            <thead>
                <tr class="table-headers">
                    <th scope="col">Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col" colspan="3" style="width: 600px; ">
                        Payment
                        Information</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let worker of listMainteance">
                    <td>{{ worker.name }}</td>
                    <td>{{ worker.lastname }}</td>
                    <td>
                        <table>
                            <tr class="salary">
                                <th scope="col">Position</th>
                                <th scope="col">Salary</th>
                                <th scope="col" colspan="2">Bank Accounts</th>
                            </tr>
                            <tr *ngFor="let salary of worker.salary">
                                <td>{{ salary.position }}</td>
                                <td>{{ salary.salary }}</td>
                                <td>
                                    <table>
                                        <tr class="bank">
                                            <th scope="col">Bank Name</th>
                                            <th scope="col">Account Number</th>
                                        </tr>
                                        <tr *ngFor="let bank  of salary.bankaccount">
                                            <td>{{bank.bank}}</td>
                                            <td>{{bank.account}}</td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <div class="acciones d-flex justify-content-evenly">
                            <button aria-hidden="true" style="background: none; border: none"
                                [routerLink]="['/edit-data', worker._id]" (click)="triggerModal()"
                                data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" (click)="updateForm()"><i
                                    class="fas fa-pencil-alt links"></i>
                            </button>
                            <button (click)="deleteMaintenance(worker._id)" aria-hidden="true"
                                style="background: none; border: none"> <i class="fa fa-trash links"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr colspan="4"></tr>
            </tbody>
        </table>
        <h4 class="text-danger text-center fw-bold" *ngIf="listMainteance.length == 0">No data stored</h4>
        <!-------------- Modal --------------->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample"
            aria-labelledby="offcanvasExampleLabel">
            <div class="offcanvas-header d-flex justify-content-end">
                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div class="mb-3 fs-4 fw-bold">
                    {{modal_title}}:
                </div>
                <form class="p-3 d-flex flex-wrap" [formGroup]="workerForm">
                    <div class="mb-1 col-6 pe-2">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" formControlName="nameworker" placeholder="Name">
                        <span class="reactive-text text-danger fw-bold"
                            *ngIf="workerForm.get('nameworker')?.hasError('required') && workerForm.get('nameworker')?.touched">Required</span>
                    </div>
                    <div class="mb-1 col-6 ps-2">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-control" formControlName="lastnameworker"
                            placeholder="Last Name">
                        <span class="reactive-text text-danger fw-bold"
                            *ngIf="workerForm.get('lastnameworker')?.hasError('required') && workerForm.get('lastnameworker')?.touched">Required</span>
                    </div>
                </form>
                <form *ngIf="!workerForm.invalid" class="p-3 d-flex flex-wrap" [formGroup]="salaryForm">
                    <div class="mb-1 col-6 pe-2">
                        <label class="form-label">Position</label>
                        <input type="text" class="form-control" formControlName="positionworker" placeholder="Position">
                        <span class="reactive-text text-danger fw-bold"
                            *ngIf="salaryForm.get('positionworker')?.hasError('required') && salaryForm.get('positionworker')?.touched">Required</span>
                    </div>
                    <div class="mb-3 col-6 pe-2">
                        <label class="form-label">Salary</label>
                        <input type="text" class="form-control" formControlName="salaryworker" placeholder="salary">
                        <span class="reactive-text text-danger fw-bold"
                            *ngIf="salaryForm.get('salaryworker')?.hasError('required') && salaryForm.get('salaryworker')?.touched">Required</span>
                    </div>
                </form>
                <form *ngIf="!salaryForm.invalid" class="p-3 d-flex flex-wrap" [formGroup]="bankForm">
                    <div class="mb-1 col-6 pe-2">
                        <label class="form-label">Bank</label>
                        <input type="text" class="form-control" formControlName="bankworker" placeholder="bank">
                        <span class="reactive-text text-danger fw-bold"
                            *ngIf="bankForm.get('bankworker')?.hasError('required') && bankForm.get('bankworker')?.touched">Required</span>
                    </div>
                    <div class="mb-1 col-6 pe-2">
                        <label class="form-label">Account</label>
                        <input type="text" class="form-control" formControlName="accountworker" placeholder="account">
                        <span class="reactive-text text-danger fw-bold"
                            *ngIf="bankForm.get('accountworker')?.hasError('required') && bankForm.get('accountworker')?.touched">Required</span>
                    </div>
                    <button type="submit" class="btn btn-secondary offset-6 col-6 mt-1 fs-6"
                        [disabled]="salaryForm.invalid" (click)="saveBank()">Save bank account</button>
                </form>
                <button type="submit" class="btn btn-success offset-6 col-6 mt-4" [disabled]="workerForm.invalid"
                    data-bs-dismiss="offcanvas" (click)="postMaintenance()">Â¡SAVE YOUR
                    DATA!</button>
            </div>
        </div>
    </div>
    <div style=" background-color: #bbbbbb; height: 1px; margin-top: 40px; margin-bottom: 10px;" class="w-50 my-4">
    </div>
</div>
<!-- *ngIf="!bankForm.invalid" -->